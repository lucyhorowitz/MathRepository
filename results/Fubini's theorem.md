## Theorem (MATH 20800 version)
Suppose $Q = A\times B \subset \mathbb R^{n+m}$ is a [[rectangle]] and $f:Q \to\mathbb R$ is a [[bounded]] function. For every $x \in A$, let $g:A \to\mathbb R$ be the [[lower integral]] $$g(x) = \underline{\int_{y\in B}} f(x,y)$$ and let $h:B \to \mathbb R$ be the [[upper integral]] $$h(x) = \overline{\int_{y\in B}}f(x,y).$$ If $f$ is [[Riemann integrable]] on $Q$, then $g$ and $h$ are both [[Riemann integrable]] on $A$ and $$\int_Q f = \int_A g = \int_A h.$$
## Proof 
#write_proof 
***
## Theorem (MATH 20900 version)
Let $(X,\Sigma,\mu)$ and $(Y,T,\nu)$ be [[σ-finite]] [[measure space|measure spaces]] and let $X\times Y$ be the [[measure space]] endowed with the [[product measure]], which is [[product measure is σ-finite if factors are|unique]]. Then if $f:X\times Y \to \mathbb R$ is [[Lebesgue integral|integrable]] on $X\times Y$, then $$\int_{X\times Y} f(x,y)\text d(x,y) = \int_X\left(\int_Yf(x,y)\text dy\right)\text dx = \int_Y\left(\int_X f(x,y)\text dx\right)\text dy.$$ Note: the assumption of [[Lebesgue integral|integrability]] requires that $$\int_{X\times Y}|f(x,y)|\text d(x,y)< \infty.$$ See [[Tonelli's theorem]].
### Outline of Proof
Let $\mathcal F$ be the set of functions for which Fubini's theorem is true. We will show that this set is equal to $L_1(X\times Y)$, the [[Lp space|space]] of [[Lebesgue integral|integrable]] functions on $X\times Y$ as follows:
1. $\mathcal F$ is a [[vector space]] (closed under finite linear combinations);
2. $\mathcal F$ is [[closed]] in the sense that it contains all of its [[limit point|limit points]];
3. [[characteristic function|Characteristic functions]] of [[Gδ]] sets of finite [[measure space|measure]] are contained in $\mathcal F$;
4. [[characteristic function|Characteristic functions]] of sets of [[measure space|measure]] zero are contained in $\mathcal F$;
5. [[characteristic function|Characteristic functions]] of sets of finite [[measure space|measure]] are contained in $\mathcal F$;
6. $\mathcal F$ contains all [[Lebesgue integral|integrable]] functions.

### Proof
Let $f: X\times Y \to \mathbb R$. Then we may write $f(z) = f(x,y)$ for $z = (x,y) \in X\times Y$. The notation $f^y$ denotes the function $g: X\to \mathbb R$ given by $g(x) = f(x,y)$ for fixed $y$. 

The statement of the theorem is equivalent to saying that for almost every $y \in Y$, the function $f^y: X\to \mathbb R$ is [[Lebesgue integral|integrable]] and that the function $\int f^y(x)\text dx: Y \to \mathbb R$ is [[Lebesgue integral|integrable]]. This is because #todo something measure zero?? There's a theorem for this I know it
1. Let $\{f_k\}_{k=1}^n$ be a collection of functions in $\mathcal  F$. Then for each $k$, there exists a set $A_k \subset Y$ of $\nu$-[[measure space|measure]] zero such that $f_k^y \in L_1(X)$ for all $y \in Y\setminus A_k$. Then because $L_p$ [[Lp is Banach|is a complete normed linear (vector) space]], the function $f = \sum\limits_{k=1}^n f_k$ has the property that $f^y \in L_1(X)$ for all $y \in Y\setminus \bigcup\limits_{k=1}^n A_k$. The union is of $\mu$-[[measure space|measure]] zero, so $f$ satisfies the properties of the theorem and is therefore in $\mathcal F$ by the [[linearity of the Lebesgue integral]]. 
2. Let $\{f_k\}_{n\in\mathbb N}$ be a sequence of functions in $\mathcal F$ that increase to $f$ so that the [[monotone convergence theorem]] holds. Then $$\lim_{k\to\infty} \int f_k(x,y) \text d(x,y) = \int f(x,y) \text d(x,y).$$ Define the sets $A_k$ as in step (1). Then also as in step (1), $\nu\left(\bigcup\limits_{k=1}^n A_k\right) = 0$ and $f_k^y \in L_1(X)$ for all $y \in Y\setminus \bigcup\limits_{k=1}^n A_k$. Then again from the [[monotone convergence theorem]] $\int f_k^y(x) \text dx$ increases to $\int f^y(x) \text dx$. Since we have assumed that the $f_k \in \mathcal F$, we have $$\int_{X\times Y} f\text d\mu = \lim_{k\to \infty}\int_{X\times Y} f_k\text d\mu = \lim_{k\to \infty} \int_{Y} \left(\int_{X} f_k^y\text d\mu\right)\text d\nu = \int_{Y} \left(\int_{X} f^y\text d\mu\right)\text d\nu.$$ Thus $f \in \mathcal F$.
3. This is done in several special cases, and relies on $X$ and $Y$ being [[metric space|metric spaces]]:
	- Let $E$ be an [[open]] "rectangle." That is, let $E = Q\times R$ for $Q \subset X$ and $R\subset Y$. Then for each $y \in Y$, the [[characteristic function]] $\chi_E(x,y)$ on $Q \subset X$ is [[measurable function|measurable]] and [[Lebesgue integral|integrable]]. We can define $$g(y) = \int_X \chi_E(x,y) \text dx = \begin{cases} \mu(Q) & y \in R \\ 0 & \text{otherwise}. \end{cases}$$ Then $g = \mu(Q)\chi_{R}$ is [[measurable function|measurable]] and [[Lebesgue integral|integrable]] so that $$\int_Y g(y)\text dy = \mu(Q)\nu(Y).$$ In the [[product measure]], we then have $$\int_{X\times Y} \chi_E(x,y)\text dx\text dy = (\mu\times\nu)(E) = \mu(Q)\nu(R)$$ so $\chi_E \in \mathcal F$. 
	- Now let $E$ be a subset of the [[boundary]] of some [[closed]] [[rectangle]] (in the usual sense). Then $E$ has [[boundary of a rectangle is measure zero|measure zero]] and $$\int_{X\times Y} \chi_E(x,y)\text dx\text dy = 0.$$ For [[almost everywhere|almost every]] $y \in Y$, the set $\{(x,y)\}_{x\in X}$ projected onto $X$ is of [[measure space|measure]] zero, with the "faces" of the rectangle being possible exceptions. Then if we set $$g(y) = \int_X \chi_E(x,y)\text dx,$$ $g(y)=0$ for almost every $y$. [[zero integral of a nonnegative function|Then]] $$\int_Y g(y)\text dy =0$$ and $\chi_E \in \mathcal F$. 
	- Now let $E = \bigcup\limits_{k=1}^n Q_k$ where the $Q_k\subset X\times Y$ are [[rectangle|rectangles]] that are almost disjoint (i.e. that their [[interior|interiors]] are pairwise disjoint, but their [[boundary|boundaries]] may intersect). Then $$\chi_E = \sum_{k=1}^n \chi_{\text{int}(Q_k)} + \sum_{k=1}^n \chi_{A_k}$$ where each $A_k$ is some subset of the [[boundary]] of $Q_k$. From the first special case, the first sum is in $\mathcal F$, and from the second special case, the second sum is in $\mathcal F$. Thus by part (1), the whole sum is in $\mathcal F$.
	- Now let $E$ be an [[open]] set of finite [[measure space|measure]]. Then we may [[open set in metric space is countable union of other open sets|write]] $$E = \bigcup_{i=1}^\infty Q_k$$ where the $Q_k$ are almost-disjoint [[rectangle|rectangles]] as in the previous case. Define $f_k = \sum\limits_{i=1}^k \chi_{Q_k}$. From the previous special case, each $f_k \in \mathcal F$ and clearly the $f_k$ increase to $\chi_E$ [[almost everywhere]], so from the second special case, $\chi_E \in \mathcal F$.
	- Now suppose that $E$ is [[Gδ]] and of finite [[measure space|measure]]. Then write $$E = \bigcap_{k=1}^\infty G_k'$$ for [[open]] sets $G_k'$. Now let $G_0$ be an [[open]] set of finite [[measure space|measure]] containing $E$, and let $G_k = \bigcap\limits_{k=1}^\infty G_k'\cap G_0$ so that the sequence $\{G_k\}_{k\in\mathbb N}$ is [[descending sequence of sets|descending]] and $E = \bigcap\limits_{k=1}^\infty G_k$. Define $f_k = \chi_{G_k}$. From the previous special case, the $f_k \in \mathcal F$, and they decrease to $\chi_E$. Then the functions $-f_k$ _increase_ to $-\chi_E$, so by the second special case, $\chi_E \in \mathcal F$.
4. Now let $E\subset X\times Y$ such that $(\mu\times\nu(E)) = 0$. Then there exists a [[Gδ]] set $G$ containing $E$ with $(\mu\times \nu)(G) =0$. From part (3), $\chi_{G} \in\mathcal F$ and moreover $$\int_Y\int_X \chi_G(x,y)\text dx\text dy = \int_{X\times Y} \chi_G = 0.$$ By the [[comparison property of the integral]], we have for each fixed $y \in Y$ $$0\leq \int_X \chi_G(x,y)\text dx.$$ [[zero integral of a nonnegative function|Then]] for [[almost everywhere|almost every]] $y\in Y$, we have $\int_X \chi_G(x,y)\text dx =0$. By definition, $$\int_X \chi_G(x,y)\text dx = \int_X \chi_{G^y},$$ so $G^y$ is of [[measure space|measure]] zero in $X\times Y$ for [[almost everywhere|almost every]] $y \in Y$. Moreover, $E^y \subset G^y$, so it has this property as well. Thus $\chi_E$ is [[Lebesgue integral|integrable]] for [[almost everywhere|almost every]] $y\in Y$, so the first part of the equivalent statement to the theorem holds. Then $\int_X \chi_E(x,y)\text dx$ is [[Lebesgue integral|integrable]] on $Y$, and the second part holds. Finally, we have already shown that all of the requisite integrals are equal to zero,  so the last part of the theorem statement holds and $\chi_E \in \mathcal F$.
5. Let $E$ be a set of finite [[measure space|measure]]. [[symmetric difference condition for Lebesgue measurability|Then]] there exists a [[Gδ]] set $G$ with $E\subset G$ and $(\mu\times\nu)(G\setminus E) =0$. Then by part (3) and (4), $\chi_G$ and $\chi_{G\setminus E} \in \mathcal F$. Thus $\chi_G - \chi_{G\setminus E} = \chi_E \in \mathcal F$ by part (1). 
6. Because the [[simple functions are dense in Lp]], we can apply (1), (2), and (5) along with the standard decomposition of any function $f$ into positive and negative parts to find that any $f\in L_p$ is in $\mathcal F$.